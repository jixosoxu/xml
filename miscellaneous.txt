Балансировка нагрузки

Планировщик

Round-robin



Выбор сообщения для обработки:

1) Получаем наиболее раннее сообщение из сообщений в очереди выбывших исполнителей
2) Получаем наиболее раннее сообщение из сообщений в пометкой "срочное" в очереди новых сообщений
3) Получаем наиболее раннее сообщение из сообщений в очереди новых сообщений



Выбор исполнителя:

1) Получаем системные лимиты для исполнителей
2) Получаем активных исполнителей
3) Получаем список, обрабатываемых ими заявок
4) Сверяем лимиты с текущей загрузкой исполнителей
5) Выбираем исполнителя с наименьшей нагрузкой



Создание заявок:

1) От клиента приходит новое сообщение
2) Если нет прикрепленных данных, тогда создается новая заявка
3) Если есть прикрепленные данные:
3.1) данные о заявке не валидны - создается новая заявка
3.2) заявка существет, но закрыта - создается новая заявка с привязкой к закрытой
3.3) заявка не закрыта - сообщение прикрепляется к существующей заявке



